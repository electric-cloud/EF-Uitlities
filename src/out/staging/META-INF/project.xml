<exportedData version="72" buildLabel="build_main_103337_2016.02.20_07:10:07" buildVersion="6.2.0.103337" passkey="1405deeab17b2f5b1a2665ce211b40facd6eaf5f">
  <exportPath>/projects/EF-Utilities</exportPath>
  <project>
    <projectName>EF-Utilities</projectName>
    <description>A set of common procedures used in Deploy project</description>
    <resourceName />
    <tracked>1</tracked>
    <workspaceName />
    <propertySheet>
      <credentialProtected>0</credentialProtected>
      <tracked>1</tracked>
      <property>
        <propertyName>ec_visibility</propertyName>
        <counter>0</counter>
        <expandable>1</expandable>
        <tracked>1</tracked>
        <value>pickListOnly</value>
      </property>
      <property>
        <propertyName>help</propertyName>
        <counter>0</counter>
        <description />
        <expandable>1</expandable>
        <tracked>1</tracked>
        <value>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

&lt;html xmlns="http://www.w3.org/1999/xhtml">
&lt;head>
    &lt;meta content="text/html; charset=us-ascii" http-equiv="content-type" />
    &lt;title>EF-UtilitiesPlugin&lt;/title>
    &lt;link rel="stylesheet" href= "../../plugins/EF-Utilities-0.2.0.8/pluginhelp.css" type="text/css" media= "screen" />
&lt;/head>

&lt;body>
    &lt;div class="help">

        &lt;h1>EF-Utilities&lt;/h1>
        &lt;p>Plugin Version 0.2.0.8&lt;/p>
        &lt;hr style="margin-left: -10px; margin-top: 10px; height: 1px; width: 100%; color: #5981BD;" noshade="noshade" />

        &lt;p>EF-Utilities is a collection of common procedures to help you
with your deploy projects. Its inception was sparked by repetitive actions required  
during my Professional Services engagements. It has grown over the years to
what it is now.&lt;/p>

&lt;h2>Content&lt;/h2>

&lt;p>It contains the following modules:&lt;/p>
  &lt;ul>
    &lt;li>createSnapshot&lt;/li>
  &lt;/ul>

    &lt;/div>
&lt;/body>
&lt;/html></value>
      </property>
      <property>
        <propertyName>pluginBuildNumber</propertyName>
        <counter>0</counter>
        <description />
        <expandable>1</expandable>
        <tracked>1</tracked>
        <value>8</value>
      </property>
      <property>
        <propertyName>pluginDependencies</propertyName>
        <counter>0</counter>
        <description />
        <expandable>1</expandable>
        <tracked>1</tracked>
        <value>EC-Admin</value>
      </property>
      <property>
        <propertyName>version</propertyName>
        <counter>0</counter>
        <description>Versions of the EF-Utilities project

History:
- version 0.2.0
   + add force option
- version 0.1.0
   + initial version with createSnapshot</description>
        <expandable>1</expandable>
        <tracked>1</tracked>
        <value>0.2.0</value>
      </property>
    <property><propertyName>ec_setup</propertyName><value># Data that drives the create step picker registration for this plugin.
my %createSnapshot = ( 
  label       => "EF-Utilities - createSnapshot", 
  procedure   => "createSnapshot", 
  description => "create an environment snapshot", 
  category    => "Deploy" 
);

@::createStepPickerSteps = (\%createSnapshot);
</value><expandable>0</expandable></property><property><propertyName>project_version</propertyName><value>0.2.0.8</value></property></propertySheet>
    <procedure>
      <procedureName>createSnapshot</procedureName>
      <description>create an environment snapshot</description>
      <jobNameTemplate />
      <resourceName />
      <timeLimit />
      <timeLimitUnits>minutes</timeLimitUnits>
      <tracked>1</tracked>
      <workspaceName />
      <propertySheet>
        <credentialProtected>0</credentialProtected>
        <tracked>1</tracked>
        <property>
          <propertyName>ec_customEditorData</propertyName>
          <tracked>1</tracked>
          <propertySheet>
            <credentialProtected>0</credentialProtected>
            <tracked>1</tracked>
            <property>
              <propertyName>parameters</propertyName>
              <tracked>1</tracked>
              <propertySheet>
                <credentialProtected>0</credentialProtected>
                <tracked>1</tracked>
                <property>
                  <propertyName>appName</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>envName</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>force</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>checkedValue</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>true</value>
                    </property>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                    <property>
                      <propertyName>initiallyChecked</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>0</value>
                    </property>
                    <property>
                      <propertyName>uncheckedValue</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>false</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>proj</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>projName</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>snapName</propertyName>
                  <tracked>1</tracked>
                  <propertySheet>
                    <credentialProtected>0</credentialProtected>
                    <tracked>1</tracked>
                    <property>
                      <propertyName>formType</propertyName>
                      <counter>0</counter>
                      <expandable>1</expandable>
                      <tracked>1</tracked>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
              </propertySheet>
            </property>
          </propertySheet>
        </property>
        <property>
          <propertyName>exposeToPlugin</propertyName>
          <counter>0</counter>
          <description />
          <expandable>1</expandable>
          <tracked>1</tracked>
          <value>1</value>
        </property>
      </propertySheet>
      <formalParameter>
        <formalParameterName>appName</formalParameterName>
        <defaultValue>$[/myApplication/applicationName]</defaultValue>
        <description>Name of the application</description>
        <expansionDeferred>0</expansionDeferred>
        <required>1</required>
        <tracked>1</tracked>
        <type>entry</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>envName</formalParameterName>
        <defaultValue>$[/myEnvironment/environmentName]</defaultValue>
        <description />
        <expansionDeferred>0</expansionDeferred>
        <required>0</required>
        <tracked>1</tracked>
        <type>entry</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>force</formalParameterName>
        <defaultValue>false</defaultValue>
        <description />
        <expansionDeferred>0</expansionDeferred>
        <required>0</required>
        <tracked>1</tracked>
        <type>checkbox</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>projName</formalParameterName>
        <defaultValue>$[/myParent/projectName]</defaultValue>
        <description>Name of the project</description>
        <expansionDeferred>0</expansionDeferred>
        <required>1</required>
        <tracked>1</tracked>
        <type>entry</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>snapName</formalParameterName>
        <defaultValue />
        <description>Name of the snapshot to create</description>
        <expansionDeferred>0</expansionDeferred>
        <required>0</required>
        <tracked>1</tracked>
        <type>entry</type>
      </formalParameter>
      <step>
        <stepName>snapshot</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <command>$[/plugins[EC-Admin]project/scripts/perlHeaderJSON]

#
# Parameters
#
my $proj  = "$[projName]";
my $app   = "$[appName]";
my $snap  = "$[snapName]";
my $env   = "$[envName]";
my $force = "$[force]";

# delete a snapshot with the same name if force mode is on
if (($force eq "true") || ($force eq "1") {
	my ($ok) = InvokeCommander("IgnoreError", 'getSnapshot', $proj, $app, $snap);
    if ($ok) {
    	$ec->deleteSnapshot($proj, $app, $snap);
    }
}
$ec->createSnapshot($proj, $app, $snap);

$[/plugins[EC-Admin]project/scripts/perlLibJSON]

</command>
        <condition />
        <description />
        <errorHandling>failProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <logFileName />
        <parallel>0</parallel>
        <postProcessor />
        <precondition />
        <releaseMode>none</releaseMode>
        <resourceName />
        <shell>ec-perl</shell>
        <timeLimit />
        <timeLimitUnits>minutes</timeLimitUnits>
        <tracked>1</tracked>
        <workingDirectory />
        <workspaceName />
        <propertySheet>
          <credentialProtected>0</credentialProtected>
          <tracked>1</tracked>
        </propertySheet>
      </step>
    </procedure>
  </project>
</exportedData>